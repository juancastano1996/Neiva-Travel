import { Component, OnInit } from '@angular/core';
import { Geolocation } from '@ionic-native/geolocation/ngx';
import { ActivatedRoute } from '@angular/router';
import { HttpClient } from '@angular/common/http';
import { ProveedorService } from '../proveedor/proveedor.service';
import { NavController } from '@ionic/angular';
import { environment } from '../../environments/environment';

const URL = environment.url;

declare var mapboxgl: any;
declare var MapboxGeocoder: any;

@Component({
  selector: 'app-rutacacao',
  templateUrl: './rutacacao.page.html',
  styleUrls: ['./rutacacao.page.scss'],
})
export class RutacacaoPage implements OnInit {

  activatedRoute: any;
  items: any;

  ionViewWillEnter():void{
    this.geolocation.watchPosition();
  }
 

  constructor(private geolocation: Geolocation,activatedRoute: ActivatedRoute, private http: HttpClient, private proveedorService: ProveedorService, public navCtrl:NavController){}
  
  lat = 0.0;
  lng = 0.0;

  informacion = null;

 
  ngOnInit() {
  
  
  mapboxgl.accessToken = 'pk.eyJ1IjoianVhbmNhc3Rhbm8xOTk2IiwiYSI6ImNqeHcwamtxazBhb2IzZHM1aDM1MjU3NXgifQ.jOYskU4ZN3f1oBuL4QORZg';

  this.geolocation.getCurrentPosition().then((resp) => {
    // resp.coords.latitude
    // resp.coords.longitude

    this.lat = parseFloat(`${ resp.coords.latitude }`); 
    this.lng = parseFloat(`${ resp.coords.longitude }`);

    // const coords = `${ resp.coords.latitude },${resp.coords.longitude}`;
    
  
  var map = new mapboxgl.Map({
    
    container: 'map5',
    style: 'mapbox://styles/mapbox/streets-v11',
    center: [ -75.27623891830444, 2.9316832856557142 ],
    zoom: 12
    });

    map.addControl(new mapboxgl.NavigationControl());

    
    map.addControl(new mapboxgl.GeolocateControl({
      positionOptions: {
        enableHighAccuracy: true,
        timeout: 3
      },
        trackUserLocation: true
    }))

    map.on('load', function() {
      map.addLayer({
        'id': 'lines',
        'type': 'line',
        'source': {
          'type': 'geojson',
          'data': {
            'type': 'FeatureCollection',
            'features': [{
              'type': 'Feature',
              'properties': {
                'color': '#8f500d' // cafe oscuro
              },
              'geometry': {
                'type': 'LineString',
                'coordinates': [
                  [
                    -75.27623891830444,
                    2.9316832856557142
                  ],
                  [
                    -75.27535915374756,
                    2.932154736512449
                  ],
                  [
                    -75.27402877807617,
                    2.932433321016232
                  ],
                  [
                    -75.27276277542114,
                    2.932240454828694
                  ],
                  [
                    -75.27164697647095,
                    2.9318118631817973
                  ],
                  [
                    -75.26950120925903,
                    2.9310403978036392
                  ],
                  [
                    -75.26817083358765,
                    2.930933249792376
                  ],
                  [
                    -75.26308536529541,
                    2.9302260726607883
                  ],
                  [
                    -75.25795698165894,
                    2.931426130559198
                  ],
                  [
                    -75.25720596313477,
                    2.9316832856557142
                  ],
                  [
                    -75.25508165359497,
                    2.9318118631817973
                  ],
                  [
                    -75.25169134140015,
                    2.9323904618663024
                  ],
                  [
                    -75.2491807937622,
                    2.9330976376298064
                  ],
                  [
                    -75.24606943130492,
                    2.9339548197738674
                  ],
                  [
                    -75.24282932281494,
                    2.9351548736713045
                  ],
                  [
                    -75.23748636245728,
                    2.937404971255026
                  ],
                  [
                    -75.23699283599854,
                    2.9375978365512707
                  ],
                  [
                    -75.23654222488403,
                    2.9376406955014738
                  ],
                  [
                    -75.2328085899353,
                    2.937340682815549
                  ],
                  [
                    -75.22716522216797,
                    2.9367835161849642
                  ],
                  [
                    -75.2203631401062,
                    2.936247778778065
                  ],
                  [
                    -75.21281003952026,
                    2.935604893550622
                  ],
                  [
                    -75.20950555801392,
                    2.935304880317883
                  ],
                  [
                    -75.20793914794922,
                    2.9351334441487236
                  ],
                  [
                    -75.20723104476929,
                    2.9351763031934786
                  ],
                  [
                    -75.20660877227782,
                    2.935304880317883
                  ],
                  [
                    -75.20592212677,
                    2.9351548736713045
                  ],
                  [
                    -75.2047848701477,
                    2.935604893550622
                  ],
                  [
                    -75.20366907119751,
                    2.936312067280454
                  ],
                  [
                    -75.20328283309937,
                    2.936719227709712
                  ],
                  [
                    -75.20240306854248,
                    2.9372763943723563
                  ],
                  [
                    -75.20190954208374,
                    2.937704983923687
                  ],
                  [
                    -75.20122289657593,
                    2.9379621375755063
                  ],
                  [
                    -75.2003002166748,
                    2.938112143845049
                  ],
                  [
                    -75.1990556716919,
                    2.938026425979196
                  ],
                  [
                    -75.19768238067627,
                    2.9375121186459405
                  ],
                  [
                    -75.19583702087402,
                    2.9375335481228997
                  ],
                  [
                    -75.1949143409729,
                    2.9372763943723563
                  ],
                  [
                    -75.19414186477661,
                    2.9364406442741506
                  ],
                  [
                    -75.19386291503906,
                    2.935519175492333
                  ],
                  [
                    -75.19420623779297,
                    2.934876289845667
                  ],
                  [
                    -75.19418478012085,
                    2.9346191354834392
                  ],
                  [
                    -75.19392728805542,
                    2.934490558280144
                  ],
                  [
                    -75.19366979598999,
                    2.9346191354834392
                  ],
                  [
                    -75.19336938858032,
                    2.934897719373184
                  ],
                  [
                    -75.19319772720337,
                    2.9350905851023277
                  ],
                  [
                    -75.19287586212158,
                    2.9351763031934786
                  ],
                  [
                    -75.19259691238403,
                    2.935197732715245
                  ],
                  [
                    -75.19221067428589,
                    2.935112014625723
                  ],
                  [
                    -75.19184589385986,
                    2.934983437479131
                  ],
                  [
                    -75.1914596557617,
                    2.9347262831415586
                  ],
                  [
                    -75.19113779067992,
                    2.93438341059943
                  ],
                  [
                    -75.19090175628662,
                    2.9340619674956616
                  ],
                  [
                    -75.19064426422119,
                    2.9337619538487507
                  ],
                  [
                    -75.19021511077881,
                    2.9336548060981915
                  ],
                  [
                    -75.1897644996643,
                    2.9335905174429455
                  ],
                  [
                    -75.18922805786133,
                    2.9335262287839714
                  ],
                  [
                    -75.18851995468138,
                    2.933397651454981
                  ],
                  [
                    -75.18781185150146,
                    2.9330976376298064
                  ],
                  [
                    -75.18738269805908,
                    2.9327976237241513
                  ],
                  [
                    -75.18699645996094,
                    2.9327333350196065
                  ],
                  [
                    -75.18635272979736,
                    2.9326047575994485
                  ],
                  [
                    -75.18555879592894,
                    2.9325618984560964
                  ],
                  [
                    -75.18491506576538,
                    2.9325190393111162
                  ],
                  [
                    -75.1839280128479,
                    2.93234760271477
                  ],
                  [
                    -75.18313407897949,
                    2.932433321016232
                  ],
                  [
                    -75.18206119537354,
                    2.9321333069323634
                  ],
                  [
                    -75.18113851547241,
                    2.9318547223538762
                  ],
                  [
                    -75.18004417419434,
                    2.931511848931281
                  ],
                  [
                    -75.1770830154419,
                    2.9306975241314976
                  ],
                  [
                    -75.17493724822998,
                    2.929968917229449
                  ],
                  [
                    -75.17463684082031,
                    2.9297760506171673
                  ],
                  [
                    -75.17448663711548,
                    2.9292831691237287
                  ],
                  [
                    -75.17433643341064,
                    2.9285545613012403
                  ],
                  [
                    -75.17418622970581,
                    2.9278259530047475
                  ],
                  [
                    -75.17356395721436,
                    2.9273973596677934
                  ],
                  [
                    -75.17302751541138,
                    2.9270330552024775
                  ],
                  [
                    -75.17210483551025,
                    2.9265830318759347
                  ],
                  [
                    -75.17088174819946,
                    2.926304445916552
                  ],
                  [
                    -75.16959428787231,
                    2.9260472895848997
                  ],
                  [
                    -75.16691207885742,
                    2.925490117330624
                  ],
                  [
                    -75.16384363174437,
                    2.9248686556434182
                  ],
                  [
                    -75.16309261322021,
                    2.924482920629856
                  ],
                  [
                    -75.16257762908936,
                    2.923111417285105
                  ],
                  [
                    -75.16238451004028,
                    2.9216970527050496
                  ],
                  [
                    -75.16227722167969,
                    2.9209898697467622
                  ],
                  [
                    -75.16242742538452,
                    2.920325545955986
                  ],
                  [
                    -75.16238451004028,
                    2.919982669007008
                  ],
                  [
                    -75.16208410263062,
                    2.919811230493258
                  ],
                  [
                    -75.16154766082762,
                    2.919832660308908
                  ],
                  [
                    -75.16071081161499,
                    2.920196967112377
                  ],
                  [
                    -75.16010999679565,
                    2.920882720774819
                  ],
                  [
                    -75.15950918197632,
                    2.9212898868137613
                  ],
                  [
                    -75.15899419784546,
                    2.9217184824847084
                  ],
                  [
                    -75.15888690948486,
                    2.9222542268432954
                  ],
                  [
                    -75.15860795974731,
                    2.9222542268432954
                  ],
                  [
                    -75.1581358909607,
                    2.9221470779920353
                  ],
                  [
                    -75.15770673751831,
                    2.922168507763094
                  ],
                  [
                    -75.15723466873169,
                    2.9224685245151294
                  ],
                  [
                    -75.15671968460083,
                    2.9225756733357033
                  ],
                  [
                    -75.15624761581421,
                    2.9225542435724052
                  ],
                  [
                    -75.1557970046997,
                    2.9223828054513015
                  ],
                  [
                    -75.15547513961792,
                    2.922189937533758
                  ],
                  [
                    -75.15502452850342,
                    2.922189937533758
                  ],
                  [
                    -75.15459537506104,
                    2.9222327970738653
                  ],
                  [
                    -75.15425205230713,
                    2.9222756566123183
                  ],
                  [
                    -75.15390872955322,
                    2.922082788676366
                  ],
                  [
                    -75.15347957611084,
                    2.922104218448671
                  ],
                  [
                    -75.15302896499634,
                    2.922189937533758
                  ],
                  [
                    -75.15283584594727,
                    2.9221256482205566
                  ],
                  [
                    -75.15268564224243,
                    2.921868490930896
                  ],
                  [
                    -75.15257835388184,
                    2.921589903800611
                  ],
                  [
                    -75.15227794647217,
                    2.921675622924984
                  ],
                  [
                    -75.15214920043945,
                    2.9220184993570197
                  ],
                  [
                    -75.15221357345581,
                    2.9223613756843267
                  ],
                  [
                    -75.1525354385376,
                    2.92274711142733
                  ],
                  [
                    -75.15270709991455,
                    2.9230685577785596
                  ],
                  [
                    -75.15270709991455,
                    2.923261425545103
                  ],
                  [
                    -75.15249252319336,
                    2.9231542767899974
                  ],
                  [
                    -75.15229940414429,
                    2.923025698270385
                  ],
                  [
                    -75.15202045440672,
                    2.922811400704947
                  ],
                  [
                    -75.1508617401123,
                    2.9215684740184966
                  ],
                  [
                    -75.1504111289978,
                    2.9210755889169477
                  ],
                  [
                    -75.1499605178833,
                    2.920947010159214
                  ],
                  [
                    -75.14966011047363,
                    2.9207970015899267
                  ],
                  [
                    -75.14944553375244,
                    2.920346975761827
                  ],
                  [
                    -75.14933824539185,
                    2.919404063918265
                  ],
                  [
                    -75.14935970306396,
                    2.917732536432732
                  ],
                  [
                    -75.1496171951294,
                    2.9160610064617614
                  ],
                  [
                    -75.14957427978516,
                    2.915632408633113
                  ],
                  [
                    -75.14929533004761,
                    2.9147966423976377
                  ],
                  [
                    -75.14920949935913,
                    2.914410903925744
                  ],
                  [
                    -75.14893054962158,
                    2.9141108850228523
                  ],
                  [
                    -75.14843702316284,
                    2.91408945509816
                  ],
                  [
                    -75.1480722427368,
                    2.914003735395295
                  ],
                  [
                    -75.14757871627808,
                    2.9140251653216285
                  ],
                  [
                    -75.14721393585205,
                    2.9141751747944857
                  ],
                  [
                    -75.14691352844238,
                    2.9140251653216285
                  ],
                  [
                    -75.1468276977539,
                    2.913746576247554
                  ],
                  [
                    -75.14691352844238,
                    2.913360837415787
                  ],
                  [
                    -75.14697790145874,
                    2.9129750984518616
                  ],
                  [
                    -75.14687061309814,
                    2.912503639538705
                  ],
                  [
                    -75.1469349861145,
                    2.9120536103920274
                  ],
                  [
                    -75.14702081680298,
                    2.91179645079892
                  ]
                ]
              }
            },
            {
              "type": "Feature",
              "properties": {
                'color': '#8f500d' // cafe oscuro
              },
              "geometry": {
                "type": "LineString",
                "coordinates": [
                  [
                    -75.11343955993652,
                    2.8545984221320477
                  ],
                  [
                    -75.11376142501831,
                    2.8545984221320477
                  ],
                  [
                    -75.11449098587036,
                    2.854405542701673
                  ],
                  [
                    -75.1148772239685,
                    2.8542983874485923
                  ],
                  [
                    -75.11517763137816,
                    2.8543198185000147
                  ],
                  [
                    -75.11560678482056,
                    2.8542555253445636
                  ],
                  [
                    -75.11595010757446,
                    2.8540840769124576
                  ],
                  [
                    -75.11620759963989,
                    2.8540840769124576
                  ],
                  [
                    -75.11629343032837,
                    2.854384111651853
                  ],
                  [
                    -75.11622905731201,
                    2.854641284223278
                  ],
                  [
                    -75.11584281921385,
                    2.854877025696526
                  ],
                  [
                    -75.11575698852539,
                    2.8550699050477433
                  ],
                  [
                    -75.11590719223022,
                    2.8551984912638906
                  ],
                  [
                    -75.11612176895142,
                    2.8551984912638906
                  ],
                  [
                    -75.11635780334473,
                    2.855048474010315
                  ],
                  [
                    -75.11661529541016,
                    2.854877025696526
                  ],
                  [
                    -75.1168942451477,
                    2.854984180895639
                  ],
                  [
                    -75.11715173721312,
                    2.855134198157611
                  ],
                  [
                    -75.11743068695068,
                    2.855241353332755
                  ],
                  [
                    -75.11781692504881,
                    2.855155629193449
                  ],
                  [
                    -75.1181173324585,
                    2.85502704297248
                  ],
                  [
                    -75.11837482452393,
                    2.854812732572244
                  ],
                  [
                    -75.11878252029418,
                    2.8545984221320477
                  ],
                  [
                    -75.11916875839233,
                    2.8546841463129176
                  ],
                  [
                    -75.119469165802,
                    2.8548555946554974
                  ],
                  [
                    -75.11974811553955,
                    2.8549198877773616
                  ],
                  [
                    -75.12017726898193,
                    2.8549198877773616
                  ],
                  [
                    -75.1205849647522,
                    2.8549198877773616
                  ],
                  [
                    -75.12079954147339,
                    2.855155629193449
                  ],
                  [
                    -75.12079954147339,
                    2.8553913705611405
                  ],
                  [
                    -75.12064933776855,
                    2.8556056808534285
                  ],
                  [
                    -75.12041330337524,
                    2.855884284173627
                  ],
                  [
                    -75.12062788009644,
                    2.8559271462168945
                  ],
                  [
                    -75.12090682983398,
                    2.8559271462168945
                  ],
                  [
                    -75.12120723724365,
                    2.855755698034246
                  ],
                  [
                    -75.12155055999756,
                    2.8555628187981643
                  ],
                  [
                    -75.12187242507935,
                    2.8555628187981643
                  ],
                  [
                    -75.12219429016113,
                    2.855584249826
                  ],
                  [
                    -75.12245178222656,
                    2.855712835984579
                  ],
                  [
                    -75.12270927429199,
                    2.855884284173627
                  ],
                  [
                    -75.12298822402954,
                    2.856355766561554
                  ],
                  [
                    -75.12331008911133,
                    2.8565915076829183
                  ],
                  [
                    -75.12352466583252,
                    2.8568915417673866
                  ],
                  [
                    -75.12365341186523,
                    2.8570415587802196
                  ],
                  [
                    -75.1238465309143,
                    2.8570415587802196
                  ],
                  [
                    -75.12403964996336,
                    2.8567629557407876
                  ],
                  [
                    -75.12429714202881,
                    2.856634369699787
                  ],
                  [
                    -75.12457609176636,
                    2.8565915076829183
                  ],
                  [
                    -75.12489795684814,
                    2.856698662722087
                  ],
                  [
                    -75.12511253356934,
                    2.8568915417673866
                  ],
                  [
                    -75.12521982192993,
                    2.8572772997607867
                  ],
                  [
                    -75.12543439865112,
                    2.857234437767912
                  ],
                  [
                    -75.1256275177002,
                    2.8569986967785668
                  ],
                  [
                    -75.1258635520935,
                    2.8567843867462193
                  ],
                  [
                    -75.1261854171753,
                    2.856805817751257
                  ],
                  [
                    -75.12648582458496,
                    2.856827248755887
                  ],
                  [
                    -75.12670040130614,
                    2.856870110763952
                  ],
                  [
                    -75.12678623199463,
                    2.857062989780448
                  ],
                  [
                    -75.12685060501099,
                    2.8572772997607867
                  ],
                  [
                    -75.1269793510437,
                    2.857555902675401
                  ],
                  [
                    -75.12715101242065,
                    2.8577273505892546
                  ],
                  [
                    -75.12732267379761,
                    2.8578345055223844
                  ],
                  [
                    -75.12734413146971,
                    2.8580059533946107
                  ],
                  [
                    -75.12721538543701,
                    2.858220263198887
                  ],
                  [
                    -75.12719392776489,
                    2.8584131419885077
                  ],
                  [
                    -75.12719392776489,
                    2.8586060207457122
                  ],
                  [
                    -75.12738704681396,
                    2.8587988994705
                  ],
                  [
                    -75.1276445388794,
                    2.858820330437918
                  ],
                  [
                    -75.12794494628906,
                    2.8589274852690028
                  ],
                  [
                    -75.12820243835449,
                    2.8591203639397467
                  ],
                  [
                    -75.12839555740356,
                    2.8593132425780494
                  ],
                  [
                    -75.1286745071411,
                    2.8594418283189076
                  ],
                  [
                    -75.12897491455077,
                    2.859463259274328
                  ],
                  [
                    -75.12927532196045,
                    2.859527552138148
                  ],
                  [
                    -75.1293396949768,
                    2.8598275854550086
                  ],
                  [
                    -75.12927532196045,
                    2.860084756806983
                  ],
                  [
                    -75.1291036605835,
                    2.8602990662229137
                  ],
                  [
                    -75.1288890838623,
                    2.8605133755987944
                  ],
                  [
                    -75.12876033782959,
                    2.8606848230706783
                  ],
                  [
                    -75.12891054153442,
                    2.8608348395875227
                  ],
                  [
                    -75.12929677963257,
                    2.8607276849346257
                  ],
                  [
                    -75.12981176376343,
                    2.860470513726832
                  ],
                  [
                    -75.13019800186157,
                    2.8601919115199674
                  ],
                  [
                    -75.13043403625488,
                    2.8603204971623044
                  ],
                  [
                    -75.13047695159912,
                    2.8607062540028427
                  ],
                  [
                    -75.13054132461548,
                    2.861113441638184
                  ],
                  [
                    -75.13069152832031,
                    2.861499198211925
                  ],
                  [
                    -75.13075590133667,
                    2.861906385565596
                  ],
                  [
                    -75.13073444366455,
                    2.862356434577662
                  ],
                  [
                    -75.13058423995972,
                    2.862806483412978
                  ],
                  [
                    -75.13054132461548,
                    2.8631279467585475
                  ],
                  [
                    -75.13047695159912,
                    2.8632993938392994
                  ],
                  [
                    -75.13075590133667,
                    2.863256532071506
                  ],
                  [
                    -75.13094902038573,
                    2.8630422232085473
                  ],
                  [
                    -75.13116359710693,
                    2.8625921744658234
                  ],
                  [
                    -75.13139963150024,
                    2.862335003676336
                  ],
                  [
                    -75.1315712928772,
                    2.862249280067012
                  ],
                  [
                    -75.1316785812378,
                    2.862506450875748
                  ],
                  [
                    -75.1316785812378,
                    2.86272075983892
                  ],
                  [
                    -75.13182878494263,
                    2.86284934519759
                  ],
                  [
                    -75.1321291923523,
                    2.8627636216267507
                  ],
                  [
                    -75.13242959976196,
                    2.8627850525200618
                  ],
                  [
                    -75.13266563415527,
                    2.862956499652135
                  ],
                  [
                    -75.13285875320435,
                    2.863256532071506
                  ],
                  [
                    -75.13309478759766,
                    2.8634065482517337
                  ],
                  [
                    -75.13341665267944,
                    2.8634065482517337
                  ],
                  [
                    -75.13384580612183,
                    2.8633636864879737
                  ],
                  [
                    -75.13410329818726,
                    2.8634708408943905
                  ],
                  [
                    -75.13431787490845,
                    2.863663718800695
                  ],
                  [
                    -75.13453245162964,
                    2.8637280114289116
                  ],
                  [
                    -75.13476848602295,
                    2.863642287923821
                  ],
                  [
                    -75.13500452041626,
                    2.8635351335334343
                  ],
                  [
                    -75.13517618179321,
                    2.863620857046553
                  ],
                  [
                    -75.13521909713745,
                    2.8638780275473983
                  ],
                  [
                    -75.13519763946533,
                    2.8641137671224404
                  ],
                  [
                    -75.13532638549805,
                    2.86428521405564
                  ],
                  [
                    -75.13543367385864,
                    2.8644566609631537
                  ],
                  [
                    -75.13558387756348,
                    2.8647138312763083
                  ],
                  [
                    -75.13569116592407,
                    2.8649067089732685
                  ],
                  [
                    -75.13581991195679,
                    2.8648852781196634
                  ],
                  [
                    -75.13588428497313,
                    2.864649538703433
                  ],
                  [
                    -75.13597011566162,
                    2.864306644920479
                  ],
                  [
                    -75.13620615005492,
                    2.8639423201635927
                  ],
                  [
                    -75.13642072677612,
                    2.8638137349275907
                  ],
                  [
                    -75.13665676116943,
                    2.863642287923821
                  ],
                  [
                    -75.13687133789061,
                    2.863620857046553
                  ],
                  [
                    -75.13702154159546,
                    2.8637923040535282
                  ],
                  [
                    -75.1371717453003,
                    2.8640066127761616
                  ],
                  [
                    -75.13745069503784,
                    2.864178059725391
                  ],
                  [
                    -75.13764381408691,
                    2.8644352301011264
                  ],
                  [
                    -75.1375150680542,
                    2.8649281398264916
                  ],
                  [
                    -75.13734340667725,
                    2.865356756806481
                  ],
                  [
                    -75.13725757598877,
                    2.8657210811132927
                  ],
                  [
                    -75.13721466064452,
                    2.8661282669660473
                  ],
                  [
                    -75.13721466064452,
                    2.8664282985543017
                  ],
                  [
                    -75.13736486434937,
                    2.8667926225200056
                  ],
                  [
                    -75.1376223564148,
                    2.867221238801723
                  ],
                  [
                    -75.13770818710327,
                    2.8674998392987088
                  ],
                  [
                    -75.13787984848021,
                    2.8677784397278594
                  ],
                  [
                    -75.1379656791687,
                    2.867928455315435
                  ],
                  [
                    -75.13811588287354,
                    2.867671285724686
                  ],
                  [
                    -75.13828754425049,
                    2.867585562514916
                  ],
                  [
                    -75.13860940933228,
                    2.8674141160760893
                  ],
                  [
                    -75.13906002044678,
                    2.867242669611576
                  ],
                  [
                    -75.13951063156127,
                    2.867049792308305
                  ],
                  [
                    -75.1398754119873,
                    2.866985499866647
                  ],
                  [
                    -75.14024019241333,
                    2.866985499866647
                  ],
                  [
                    -75.14039039611816,
                    2.867242669611576
                  ],
                  [
                    -75.140540599823,
                    2.8674569776882133
                  ],
                  [
                    -75.14084100723265,
                    2.8676284241206025
                  ],
                  [
                    -75.14120578765869,
                    2.8680999016771653
                  ],
                  [
                    -75.14137744903564,
                    2.868399932748325
                  ],
                  [
                    -75.14159202575684,
                    2.8687642560860347
                  ],
                  [
                    -75.14150619506836,
                    2.8690857177581996
                  ],
                  [
                    -75.14122724533081,
                    2.869107148533143
                  ],
                  [
                    -75.1408839225769,
                    2.8692357331742926
                  ],
                  [
                    -75.14049768447875,
                    2.8693857485706786
                  ],
                  [
                    -75.14026165008545,
                    2.8695357639473835
                  ],
                  [
                    -75.14000415802002,
                    2.8696429177758427
                  ],
                  [
                    -75.13970375061035,
                    2.8697929331187955
                  ],
                  [
                    -75.13959646224976,
                    2.8702644097827545
                  ],
                  [
                    -75.13959646224976,
                    2.870628732526209
                  ],
                  [
                    -75.13936042785645,
                    2.8707787477397515
                  ],
                  [
                    -75.1393175125122,
                    2.87110020884532
                  ],
                  [
                    -75.13970375061035,
                    2.871207362527066
                  ],
                  [
                    -75.14039039611816,
                    2.871400239128898
                  ],
                  [
                    -75.14049768447875,
                    2.871593115698148
                  ],
                  [
                    -75.14039039611816,
                    2.871807422959138
                  ],
                  [
                    -75.14024019241333,
                    2.872128883775212
                  ],
                  [
                    -75.1403260231018,
                    2.872407483075953
                  ],
                  [
                    -75.14058351516724,
                    2.8728146665470704
                  ],
                  [
                    -75.14084100723265,
                    2.8733075726599235
                  ],
                  [
                    -75.1409912109375,
                    2.8738004785599336
                  ],
                  [
                    -75.14131307601929,
                    2.874079077452749
                  ],
                  [
                    -75.14172077178955,
                    2.8742076615341974
                  ],
                  [
                    -75.1419997215271,
                    2.8745076910012126
                  ],
                  [
                    -75.1421070098877,
                    2.8750220270468234
                  ],
                  [
                    -75.14206409454346,
                    2.875279194982679
                  ],
                  [
                    -75.14178514480591,
                    2.8757935306804647
                  ],
                  [
                    -75.14159202575684,
                    2.876007837152766
                  ],
                  [
                    -75.14135599136353,
                    2.8762650048663643
                  ],
                  [
                    -75.14116287231444,
                    2.87662932569468
                  ],
                  [
                    -75.14092683792114,
                    2.877057938284855
                  ],
                  [
                    -75.14062643051147,
                    2.8772079526533365
                  ],
                  [
                    -75.14028310775757,
                    2.8772936751407645
                  ],
                  [
                    -75.13978958129883,
                    2.877572273180352
                  ],
                  [
                    -75.1394248008728,
                    2.877765148706329
                  ],
                  [
                    -75.13921022415161,
                    2.877958024199674
                  ],
                  [
                    -75.13886690139769,
                    2.877893732372193
                  ],
                  [
                    -75.13869524002075,
                    2.878536650483849
                  ],
                  [
                    -75.13839483261108,
                    2.8786438034671966
                  ],
                  [
                    -75.13822317123413,
                    2.8789224011767316
                  ],
                  [
                    -75.13826608657837,
                    2.879243859987708
                  ],
                  [
                    -75.13852357864378,
                    2.879243859987708
                  ],
                  [
                    -75.13886690139769,
                    2.8793295823219727
                  ],
                  [
                    -75.13925313949585,
                    2.879501026971165
                  ],
                  [
                    -75.13966083526611,
                    2.879651041018042
                  ],
                  [
                    -75.14006853103638,
                    2.879758193896571
                  ],
                  [
                    -75.14051914215088,
                    2.879801055045174
                  ],
                  [
                    -75.14101266860962,
                    2.879758193896571
                  ],
                  [
                    -75.14159202575684,
                    2.879736763321672
                  ],
                  [
                    -75.14208555221558,
                    2.87962961044112
                  ],
                  [
                    -75.14238595962524,
                    2.87962961044112
                  ],
                  [
                    -75.1426649093628,
                    2.879736763321672
                  ],
                  [
                    -75.14281511306761,
                    2.8797153327463656
                  ],
                  [
                    -75.14294385910034,
                    2.879415304649788
                  ],
                  [
                    -75.14330863952637,
                    2.879093845887194
                  ],
                  [
                    -75.14371633529663,
                    2.8789224011767316
                  ],
                  [
                    -75.14429569244385,
                    2.8787080952523634
                  ],
                  [
                    -75.14485359191895,
                    2.878536650483849
                  ],
                  [
                    -75.14543294906615,
                    2.8782580526799917
                  ],
                  [
                    -75.14594793319702,
                    2.8779794548080324
                  ],
                  [
                    -75.14626979827881,
                    2.877722287481164
                  ],
                  [
                    -75.14650583267212,
                    2.877893732372193
                  ],
                  [
                    -75.14654874801636,
                    2.8783009138850173
                  ],
                  [
                    -75.14674186706542,
                    2.8788366788118314
                  ],
                  [
                    -75.14691352844238,
                    2.8793938740684384
                  ],
                  [
                    -75.14687061309814,
                    2.8798224856188517
                  ],
                  [
                    -75.14687061309814,
                    2.880186805309877
                  ],
                  [
                    -75.14699935913086,
                    2.880508263764008
                  ],
                  [
                    -75.14729976654053,
                    2.8809154443422833
                  ],
                  [
                    -75.147385597229,
                    2.8811940414961628
                  ],
                  [
                    -75.14742851257324,
                    2.881686943985982
                  ],
                  [
                    -75.14742851257324,
                    2.8820298325486666
                  ],
                  [
                    -75.14762163162231,
                    2.882115554673193
                  ],
                  [
                    -75.14790058135986,
                    2.882072693611725
                  ],
                  [
                    -75.14817953109741,
                    2.881944110417677
                  ],
                  [
                    -75.14858722686768,
                    2.8816440829083825
                  ],
                  [
                    -75.14893054962158,
                    2.881429777496172
                  ],
                  [
                    -75.14923095703125,
                    2.881429777496172
                  ],
                  [
                    -75.1496171951294,
                    2.8813869164089034
                  ],
                  [
                    -75.1499605178833,
                    2.881236902590696
                  ],
                  [
                    -75.15026092529297,
                    2.8812154720436327
                  ],
                  [
                    -75.15058279037476,
                    2.8812154720436327
                  ],
                  [
                    -75.15090465545654,
                    2.881301194229493
                  ],
                  [
                    -75.15109777450562,
                    2.881579791288961
                  ],
                  [
                    -75.15109777450562,
                    2.8818798188152015
                  ],
                  [
                    -75.15088319778442,
                    2.8823727210080463
                  ],
                  [
                    -75.15069007873534,
                    2.882801331436971
                  ],
                  [
                    -75.15056133270264,
                    2.8832728027223067
                  ],
                  [
                    -75.15053987503052,
                    2.883594260304838
                  ],
                  [
                    -75.15060424804688,
                    2.8838514263054407
                  ],
                  [
                    -75.15084028244019,
                    2.8842371751973146
                  ],
                  [
                    -75.15090465545654,
                    2.8847086458874927
                  ],
                  [
                    -75.15090465545654,
                    2.885265838269285
                  ],
                  [
                    -75.15088319778442,
                    2.88578016945623
                  ],
                  [
                    -75.15101194381712,
                    2.8861444872395077
                  ],
                  [
                    -75.15114068984985,
                    2.8865088049059957
                  ],
                  [
                    -75.15135526657103,
                    2.887087426842111
                  ],
                  [
                    -75.15156984329224,
                    2.887451744206243
                  ],
                  [
                    -75.15176296234131,
                    2.887751770183108
                  ],
                  [
                    -75.15182733535767,
                    2.8880089352430427
                  ],
                  [
                    -75.15165567398071,
                    2.888116087334168
                  ],
                  [
                    -75.15135526657103,
                    2.8882232394151925
                  ],
                  [
                    -75.15109777450562,
                    2.8884804043683747
                  ],
                  [
                    -75.15092611312866,
                    2.8888018604779533
                  ],
                  [
                    -75.1508617401123,
                    2.889037594900471
                  ],
                  [
                    -75.15094757080078,
                    2.889294759669219
                  ],
                  [
                    -75.15114068984985,
                    2.8895519243797
                  ],
                  [
                    -75.15129089355469,
                    2.889894810569728
                  ],
                  [
                    -75.15135526657103,
                    2.8903448485369365
                  ],
                  [
                    -75.15120506286621,
                    2.890602013009486
                  ],
                  [
                    -75.15092611312866,
                    2.8906448737492347
                  ],
                  [
                    -75.15069007873534,
                    2.8909020381537966
                  ],
                  [
                    -75.15066862106323,
                    2.8912449239358873
                  ],
                  [
                    -75.15084028244019,
                    2.8914592274970525
                  ],
                  [
                    -75.15114068984985,
                    2.89158780961433
                  ],
                  [
                    -75.15150547027588,
                    2.8918449738051333
                  ],
                  [
                    -75.15178442001343,
                    2.8919735558786717
                  ],
                  [
                    -75.15214920043945,
                    2.8921021379376435
                  ],
                  [
                    -75.15236377716064,
                    2.8922307199820354
                  ],
                  [
                    -75.1525354385376,
                    2.892552175029207
                  ],
                  [
                    -75.15247106552124,
                    2.8928736299852744
                  ],
                  [
                    -75.15212774276733,
                    2.8932593758122387
                  ],
                  [
                    -75.15193462371826,
                    2.8935594002535705
                  ],
                  [
                    -75.15172004699707,
                    2.893795133687496
                  ],
                  [
                    -75.15154838562012,
                    2.894159448898036
                  ],
                  [
                    -75.15144109725952,
                    2.8944594731011186
                  ],
                  [
                    -75.15116214752197,
                    2.8946094851728708
                  ],
                  [
                    -75.1509690284729,
                    2.894716636640544
                  ],
                  [
                    -75.15092611312866,
                    2.8949738001216003
                  ],
                  [
                    -75.15094757080078,
                    2.895295254390859
                  ],
                  [
                    -75.15111923217773,
                    2.8956381388441774
                  ],
                  [
                    -75.15129089355469,
                    2.8960024534621036
                  ],
                  [
                    -75.15137672424316,
                    2.8964310587449416
                  ],
                  [
                    -75.15146255493164,
                    2.8967739428543915
                  ],
                  [
                    -75.15137672424316,
                    2.8970096756194206
                  ],
                  [
                    -75.15109777450562,
                    2.8970739663650162
                  ],
                  [
                    -75.15075445175171,
                    2.8971811175995295
                  ],
                  [
                    -75.1505184173584,
                    2.897373989796115
                  ],
                  [
                    -75.15023946762085,
                    2.8975882921982223
                  ],
                  [
                    -75.14991760253906,
                    2.8979311759571877
                  ],
                  [
                    -75.14925241470337,
                    2.898616943163526
                  ],
                  [
                    -75.14886617660522,
                    2.8992169891281447
                  ],
                  [
                    -75.1488447189331,
                    2.899559872393628
                  ],
                  [
                    -75.14873743057251,
                    2.900138487668415
                  ],
                  [
                    -75.14852285385132,
                    2.9006742422885528
                  ],
                  [
                    -75.14839410781859,
                    2.9011028458018955
                  ],
                  [
                    -75.14824390411377,
                    2.901488588824985
                  ],
                  [
                    -75.14811515808105,
                    2.90202434280536
                  ],
                  [
                    -75.14809370040894,
                    2.902581526675543
                  ],
                  [
                    -75.14809370040894,
                    2.903031559600923
                  ],
                  [
                    -75.14824390411377,
                    2.903438732093211
                  ],
                  [
                    -75.14837265014648,
                    2.9040173453824543
                  ],
                  [
                    -75.14847993850708,
                    2.9045316680573694
                  ],
                  [
                    -75.14847993850708,
                    2.9051102807866442
                  ],
                  [
                    -75.14847993850708,
                    2.905646033049367
                  ],
                  [
                    -75.14847993850708,
                    2.9061389249065033
                  ],
                  [
                    -75.1485013961792,
                    2.9066961067466783
                  ],
                  [
                    -75.1485013961792,
                    2.907231858256615
                  ],
                  [
                    -75.14826536178589,
                    2.9075318789910485
                  ],
                  [
                    -75.14800786972046,
                    2.9078533296894093
                  ],
                  [
                    -75.14781475067139,
                    2.9081319202205593
                  ],
                  [
                    -75.1478362083435,
                    2.9085819509331894
                  ],
                  [
                    -75.14792203903198,
                    2.9089891214232164
                  ],
                  [
                    -75.14790058135986,
                    2.909460581806908
                  ],
                  [
                    -75.14775037765503,
                    2.9099534719972304
                  ],
                  [
                    -75.14755725860596,
                    2.9102320620094666
                  ],
                  [
                    -75.147385597229,
                    2.9105535119380184
                  ],
                  [
                    -75.14725685119629,
                    2.911024971667356
                  ],
                  [
                    -75.1471495628357,
                    2.9114321412748554
                  ],
                  [
                    -75.14702081680298,
                    2.911860740702712
                  ]        
                ] 
              }
            }]
          }
        },
      'paint': {
      'line-width': 3,
      // Use a get expression (https://docs.mapbox.com/mapbox-gl-js/style-spec/#expressions-get)
      // to set the line-color to a feature property value.
      'line-color': ['get', 'color']
      }
    });
  });

  map.on('load', function () {
    // Add a layer showing the places.
    map.addLayer({
      "id": "places",
      "type": "symbol",
      "source": {
        "type": "geojson",
        "data": {
          "type": "FeatureCollection",
          "features": [{
            "type": "Feature",
            "properties": {
              "description": "<strong>Salida</strong><p><strong>El Ceibo</strong> (Calle 8 con cra. 20) </p>",
              "icon": "viewpoint"
            },
            "geometry": {
              "type": "Point",
              "coordinates": [-75.27623891830444, 2.9316832856557142]
            }
          }, {
            "type": "Feature",
            "properties": {
              "description": "<strong>Predio El Palmar y ASPROCAECO</strong><p><strong>Vereda Los Cauchos </strong>Km 19</p>",
              "icon": "ranger-station"
            },
            "geometry": {
              "type": "Point",
              "coordinates": [-75.13914585113525, 2.8703501327916534]
            }
          }, {
            "type": "Feature",
            "properties": {
              "description": "<strong>Predio El Rosal</strong><p><strong>Vereda Santa Helena </strong>Km 29</p>",
              "icon": "ranger-station"
            },
            "geometry": {
              "type": "Point",
              "coordinates": [-75.11343955993652, 2.8545984221320477]
            }
          }, {
            "type": "Feature",
            "properties": {
              "description": "<strong>Predio La Florida</strong><p><strong>Vereda Vergel </strong>Km 24</p>",
              "icon": "ranger-station"
            },
            "geometry": {
              "type": "Point",
              "coordinates": [-75.12695789337158, 2.8589060543035947]
            }
          }
        ]
      }
    },
    "layout": {
      "icon-image": "{icon}-15",
      "icon-allow-overlap": true
    }
  });
     
    // When a click event occurs on a feature in the places layer, open a popup at the
    // location of the feature, with description HTML from its properties.
    map.on('click', 'places', function (e) {
    var coordinates = e.features[0].geometry.coordinates.slice();
    var description = e.features[0].properties.description;
     
    // Ensure that if the map is zoomed out such that multiple
    // copies of the feature are visible, the popup appears
    // over the copy being pointed to.
    while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
    coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
    }
     
    new mapboxgl.Popup()
    .setLngLat(coordinates)
    .setHTML(description)
    .addTo(map);
    });
     
    // Change the cursor to a pointer when the mouse is over the places layer.
    map.on('mouseenter', 'places', function () {
    map.getCanvas().style.cursor = 'pointer';
    });
     
    // Change it back to a pointer when it leaves.
    map.on('mouseleave', 'places', function () {
    map.getCanvas().style.cursor = '';
    });
    });

  }).catch((error) => {
    console.log('Error getting location', error);
  });
    
  let watch = this.geolocation.watchPosition();
  watch.subscribe((data) => {
  // data can be a set of coordinates, or an error (if an error occurred).
  // data.coords.latitude
  // data.coords.longitude
  }); }
}
